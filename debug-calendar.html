<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>调试日历视图</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // 模拟任务数据
        const tasks = [
            {
                id: 1,
                text: '测试任务1',
                completed: false,
                priority: 'high',
                createdAt: new Date().toISOString(),
                dueDate: new Date().toISOString()
            },
            {
                id: 2,
                text: '测试任务2',
                completed: false,
                priority: 'medium',
                createdAt: new Date().toISOString(),
                dueDate: new Date().toISOString()
            }
        ];

        function renderCalendar() {
            console.log('开始渲染日历');
            const calendarGrid = document.getElementById('calendar-grid');
            calendarGrid.innerHTML = '';
            
            const currentDate = new Date();
            const year = currentDate.getFullYear();
            const month = currentDate.getMonth();
            
            console.log('当前日期:', currentDate);
            console.log('年份:', year, '月份:', month);
            
            // 获取当月第一天和最后一天
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const firstDayIndex = firstDay.getDay();
            const daysInMonth = lastDay.getDate();
            
            console.log('当月天数:', daysInMonth, '第一天星期:', firstDayIndex);
            
            // 渲染当月天数
            for (let i = 1; i <= daysInMonth; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'p-2 border border-gray-100 text-center';
                dayElement.textContent = i;
                calendarGrid.appendChild(dayElement);
            }
            
            console.log('日历渲染完成');
        }

        function showTasks() {
            console.log('显示任务');
            const tasksContainer = document.getElementById('today-tasks');
            tasksContainer.innerHTML = '<div class="p-4 bg-blue-50 rounded">今日任务：' + tasks.length + '个</div>';
        }

        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            console.log('页面加载完成');
            renderCalendar();
            showTasks();
        });
    </script>
</head>
<body class="bg-gray-100 p-8">
    <div class="bg-white rounded-xl p-6 max-w-4xl mx-auto">
        <h1 class="text-2xl font-bold mb-6">调试日历视图</h1>
        
        <div class="mb-6">
            <button onclick="renderCalendar()" class="px-4 py-2 bg-blue-500 text-white rounded">
                重新渲染日历
            </button>
        </div>
        
        <div class="grid grid-cols-7 gap-1 mb-6" id="calendar-grid">
            <!-- 日历格子将通过JavaScript动态添加 -->
        </div>
        
        <div id="today-tasks">
            <!-- 今日任务将通过JavaScript动态添加 -->
        </div>
        
        <div class="mt-6 p-4 bg-gray-100 rounded">
            <h3 class="font-bold mb-2">控制台输出：</h3>
            <p>请按F12打开开发者工具查看控制台输出</p>
        </div>
    </div>
</body>
</html>